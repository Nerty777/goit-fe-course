{"ast":null,"code":"import _classCallCheck from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/src/modules/user/UserMenu/UserMenu.js\";\nimport React, { Component, createRef } from 'react';\nimport DropDown from '../DropDown/DropDown';\nimport Avatar from '../Avatar/Avatar';\nimport routes from '../../../configs/routes';\nimport userAvatar from './userAvatar.jpg';\nimport s from './UserMenu.module.css';\n\nvar UserMenu =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserMenu, _Component);\n\n  function UserMenu() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserMenu)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.backdropRef = createRef();\n    _this.state = {\n      isDropDownOpen: false\n    };\n\n    _this.handleWindowClick = function (e) {\n      var isTargetInsideContainer = _this.backdropRef.current.contains(e.target);\n\n      var isDropDownOpen = _this.state.isDropDownOpen;\n\n      if (isDropDownOpen && !isTargetInsideContainer) {\n        _this.closeDropDown();\n      }\n\n      if ((e.target.pathname === routes.ACCOUNT || e.target.pathname === routes.PLANNER || e.target.pathname === routes.ORDER_HISTORY) && isTargetInsideContainer && isDropDownOpen) {\n        _this.closeDropDown();\n      }\n    };\n\n    _this.handleEscClick = function (e) {\n      if (e.code !== 'Escape') {\n        return;\n      }\n\n      _this.closeDropDown();\n    };\n\n    _this.openDropDown = function () {\n      _this.setState({\n        isDropDownOpen: true\n      });\n    };\n\n    _this.closeDropDown = function () {\n      _this.setState({\n        isDropDownOpen: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UserMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('click', this.handleWindowClick);\n      window.addEventListener('keydown', this.handleEscClick);\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var isDropDownOpen = this.state.isDropDownOpen;\n      return nextState.isDropDownOpen !== isDropDownOpen;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      window.removeEventListener('click', this.handleWindowClick);\n      window.removeEventListener('keydown', this.handleEscClick);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isDropDownOpen = this.state.isDropDownOpen;\n      console.log('this.props.onSignOut: ', this.props.onSignOut);\n      return React.createElement(\"div\", {\n        className: s.container,\n        onClick: this.openDropDown,\n        ref: this.backdropRef,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(Avatar, {\n        userAvatar: userAvatar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: s.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.props.user.name), isDropDownOpen && React.createElement(DropDown, {\n        onSignOut: this.props.onSignOut,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return UserMenu;\n}(Component);\n\nexport { UserMenu as default };","map":{"version":3,"sources":["/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/src/modules/user/UserMenu/UserMenu.js"],"names":["React","Component","createRef","DropDown","Avatar","routes","userAvatar","s","UserMenu","backdropRef","state","isDropDownOpen","handleWindowClick","e","isTargetInsideContainer","current","contains","target","closeDropDown","pathname","ACCOUNT","PLANNER","ORDER_HISTORY","handleEscClick","code","openDropDown","setState","window","addEventListener","nextProps","nextState","removeEventListener","console","log","props","onSignOut","container","name","user"],"mappings":"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","sourcesContent":["import React, { Component, createRef } from 'react';\nimport DropDown from '../DropDown/DropDown';\nimport Avatar from '../Avatar/Avatar';\nimport routes from '../../../configs/routes';\nimport userAvatar from './userAvatar.jpg';\nimport s from './UserMenu.module.css';\n\nexport default class UserMenu extends Component {\n  backdropRef = createRef();\n\n  state = {\n    isDropDownOpen: false,\n  };\n\n  componentDidMount() {\n    window.addEventListener('click', this.handleWindowClick);\n    window.addEventListener('keydown', this.handleEscClick);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    const { isDropDownOpen } = this.state;\n    return nextState.isDropDownOpen !== isDropDownOpen;\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('click', this.handleWindowClick);\n    window.removeEventListener('keydown', this.handleEscClick);\n  }\n\n  handleWindowClick = e => {\n    const isTargetInsideContainer = this.backdropRef.current.contains(e.target);\n    const { isDropDownOpen } = this.state;\n    if (isDropDownOpen && !isTargetInsideContainer) {\n      this.closeDropDown();\n    }\n    if (\n      (e.target.pathname === routes.ACCOUNT ||\n        e.target.pathname === routes.PLANNER ||\n        e.target.pathname === routes.ORDER_HISTORY) &&\n      isTargetInsideContainer &&\n      isDropDownOpen\n    ) {\n      this.closeDropDown();\n    }\n  };\n\n  handleEscClick = e => {\n    if (e.code !== 'Escape') {\n      return;\n    }\n    this.closeDropDown();\n  };\n\n  openDropDown = () => {\n    this.setState({\n      isDropDownOpen: true,\n    });\n  };\n\n  closeDropDown = () => {\n    this.setState({\n      isDropDownOpen: false,\n    });\n  };\n\n  render() {\n    const { isDropDownOpen } = this.state;\n    console.log('this.props.onSignOut: ', this.props.onSignOut);\n    return (\n      <div\n        className={s.container}\n        onClick={this.openDropDown}\n        ref={this.backdropRef}\n      >\n        <Avatar userAvatar={userAvatar} />\n        <span className={s.name}>{this.props.user.name}</span>\n        {isDropDownOpen && <DropDown onSignOut={this.props.onSignOut} />}\n        \n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}