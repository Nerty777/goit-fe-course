{"ast":null,"code":"import _toConsumableArray from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/src/modules/menu/components/MenuPageList/MenuPageListContainer.js\";\nimport React, { Component } from 'react';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport queryString from 'query-string';\nimport { menuOperations, menuSelectors } from '../..';\nimport cartActions from '../../../cart/components/Cart/cartActions';\nimport PageList from './MenuPageList';\nimport ModalMenuPage from '../../../../сomponents/Modal/ModalMenuPage/index';\nimport MenuCategorySelector from '../MenuCategorySelector/MenuCategorySelector';\nimport MenuFilter from '../MenuFilter/MenuFilter';\nimport routes from '../../../../configs/routes';\nimport s from './MenuPageListContainer.module.css';\n\nvar getCategoryFromProps = function getCategoryFromProps(props) {\n  return queryString.parse(props.location.search).category;\n};\n\nvar PageListContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PageListContainer, _Component);\n\n  function PageListContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PageListContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PageListContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleCategoryChange = function (category) {\n      var _this$props = _this.props,\n          history = _this$props.history,\n          location = _this$props.location,\n          fetchMenuByCategory = _this$props.fetchMenuByCategory;\n      history.push({\n        pathname: location.pathname,\n        search: \"category=\".concat(category)\n      });\n      return fetchMenuByCategory(category);\n    };\n\n    _this.handleFilterChange = function (e) {\n      var handleFilterChange = _this.props.handleFilterChange;\n      handleFilterChange(e.target.value);\n    };\n\n    return _this;\n  }\n\n  _createClass(PageListContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n          fetchMenuItems = _this$props2.fetchMenuItems,\n          fetchAllCategories = _this$props2.fetchAllCategories,\n          fetchMenuByCategory = _this$props2.fetchMenuByCategory;\n      fetchMenuItems();\n      fetchAllCategories();\n      var category = getCategoryFromProps(this.props);\n\n      if (!category) {\n        var _this$props3 = this.props,\n            history = _this$props3.history,\n            location = _this$props3.location;\n        return history.replace({\n          pathname: location.pathname,\n          search: 'category=all'\n        });\n      }\n\n      return fetchMenuByCategory(category);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          menuOneItemForModal = _this$props4.menuOneItemForModal,\n          match = _this$props4.match,\n          handleDeleteCard = _this$props4.handleDeleteCard,\n          handleShowMoreInfo = _this$props4.handleShowMoreInfo,\n          modalStatus = _this$props4.modalStatus,\n          categories = _this$props4.categories,\n          filteredMenu = _this$props4.filteredMenu,\n          addToCart = _this$props4.addToCart;\n      var currentCategory = getCategoryFromProps(this.props);\n      return React.createElement(\"section\", {\n        className: s.menupage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: s.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        className: s.link,\n        activeClassName: s.link_hover,\n        to: routes.MENU_ADD_ITEM,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, \"Add new menu card\"), React.createElement(MenuFilter, {\n        handleFilterChange: this.handleFilterChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(MenuCategorySelector, {\n        options: ['all'].concat(_toConsumableArray(categories.map(function (item) {\n          return item.name;\n        }))),\n        value: currentCategory,\n        onChange: this.handleCategoryChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      })), filteredMenu && React.createElement(PageList, {\n        filteredMenu: filteredMenu,\n        match: match,\n        handleDeleteCard: handleDeleteCard,\n        handleShowMoreInfo: handleShowMoreInfo,\n        addToCart: addToCart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }), modalStatus && React.createElement(ModalMenuPage, {\n        menuOneItemForModal: menuOneItemForModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return PageListContainer;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    menuOneItemForModal: menuSelectors.getMenuOneItemForModal(state),\n    modalStatus: menuSelectors.modalStatus(state),\n    categories: menuSelectors.getAllCategories(state),\n    filteredMenu: menuSelectors.getFilteredMenuItems(state)\n  };\n};\n\nvar mapDispatchToProps = {\n  fetchMenuItems: menuOperations.fetchMenuItems,\n  fetchAllCategories: menuOperations.fetchAllCategories,\n  handleDeleteCard: menuOperations.fetchDeleteMenuItem,\n  handleShowMoreInfo: menuOperations.getMenuOneItem,\n  fetchMenuByCategory: menuOperations.fetchMenuByCategory,\n  handleFilterChange: menuOperations.handleFilterChange,\n  addToCart: cartActions.addToCart\n};\nexport default compose(withRouter, connect(mapStateToProps, mapDispatchToProps))(PageListContainer);","map":{"version":3,"sources":["/Users/nerty777/Desktop/work/goit-fe-course/react/homework-5/client/src/modules/menu/components/MenuPageList/MenuPageListContainer.js"],"names":["React","Component","withRouter","NavLink","connect","compose","queryString","menuOperations","menuSelectors","cartActions","PageList","ModalMenuPage","MenuCategorySelector","MenuFilter","routes","s","getCategoryFromProps","props","parse","location","search","category","PageListContainer","handleCategoryChange","history","fetchMenuByCategory","push","pathname","handleFilterChange","e","target","value","fetchMenuItems","fetchAllCategories","replace","menuOneItemForModal","match","handleDeleteCard","handleShowMoreInfo","modalStatus","categories","filteredMenu","addToCart","currentCategory","menupage","container","link","link_hover","MENU_ADD_ITEM","map","item","name","mapStateToProps","state","getMenuOneItemForModal","getAllCategories","getFilteredMenuItems","mapDispatchToProps","fetchDeleteMenuItem","getMenuOneItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { withRouter, NavLink } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport queryString from 'query-string';\nimport { menuOperations, menuSelectors } from '../..';\nimport cartActions from '../../../cart/components/Cart/cartActions';\nimport PageList from './MenuPageList';\nimport ModalMenuPage from '../../../../сomponents/Modal/ModalMenuPage/index';\nimport MenuCategorySelector from '../MenuCategorySelector/MenuCategorySelector';\nimport MenuFilter from '../MenuFilter/MenuFilter';\nimport routes from '../../../../configs/routes';\nimport s from './MenuPageListContainer.module.css';\n\nconst getCategoryFromProps = props =>\n  queryString.parse(props.location.search).category;\n\nclass PageListContainer extends Component {\n  componentDidMount() {\n    const {\n      fetchMenuItems,\n      fetchAllCategories,\n      fetchMenuByCategory,\n    } = this.props;\n    fetchMenuItems();\n    fetchAllCategories();\n    const category = getCategoryFromProps(this.props);\n\n    if (!category) {\n      const { history, location } = this.props;\n      return history.replace({\n        pathname: location.pathname,\n        search: 'category=all',\n      });\n    }\n    return fetchMenuByCategory(category);\n  }\n\n  handleCategoryChange = category => {\n    const { history, location, fetchMenuByCategory } = this.props;\n    history.push({\n      pathname: location.pathname,\n      search: `category=${category}`,\n    });\n    return fetchMenuByCategory(category);\n  };\n\n  handleFilterChange = e => {\n    const { handleFilterChange } = this.props;\n    handleFilterChange(e.target.value);\n  };\n\n  render() {\n    const {\n      menuOneItemForModal,\n      match,\n      handleDeleteCard,\n      handleShowMoreInfo,\n      modalStatus,\n      categories,\n      filteredMenu,\n      addToCart,\n    } = this.props;\n\n    const currentCategory = getCategoryFromProps(this.props);\n\n    return (\n      <section className={s.menupage}>\n        <div className={s.container}>\n          <NavLink\n            className={s.link}\n            activeClassName={s.link_hover}\n            to={routes.MENU_ADD_ITEM}\n          >\n            Add new menu card\n          </NavLink>\n          <MenuFilter handleFilterChange={this.handleFilterChange} />\n          <MenuCategorySelector\n            options={['all', ...categories.map(item => item.name)]}\n            value={currentCategory}\n            onChange={this.handleCategoryChange}\n          />\n        </div>\n        {filteredMenu && (\n          <PageList\n            filteredMenu={filteredMenu}\n            match={match}\n            handleDeleteCard={handleDeleteCard}\n            handleShowMoreInfo={handleShowMoreInfo}\n            addToCart={addToCart}\n          />\n        )}\n        {modalStatus && (\n          <ModalMenuPage menuOneItemForModal={menuOneItemForModal} />\n        )}\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    menuOneItemForModal: menuSelectors.getMenuOneItemForModal(state),\n    modalStatus: menuSelectors.modalStatus(state),\n    categories: menuSelectors.getAllCategories(state),\n    filteredMenu: menuSelectors.getFilteredMenuItems(state),\n  };\n};\n\nconst mapDispatchToProps = {\n  fetchMenuItems: menuOperations.fetchMenuItems,\n  fetchAllCategories: menuOperations.fetchAllCategories,\n  handleDeleteCard: menuOperations.fetchDeleteMenuItem,\n  handleShowMoreInfo: menuOperations.getMenuOneItem,\n  fetchMenuByCategory: menuOperations.fetchMenuByCategory,\n  handleFilterChange: menuOperations.handleFilterChange,\n  addToCart: cartActions.addToCart,\n};\n\nexport default compose(\n  withRouter,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps,\n  ),\n)(PageListContainer);\n"]},"metadata":{},"sourceType":"module"}